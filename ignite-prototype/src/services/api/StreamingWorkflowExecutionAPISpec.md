ä»¥ä¸‹ã¯ã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡ŒAPIã®ä»•æ§˜æ›¸ã§ã™ã€‚  
ã“ã®ä»•æ§˜æ›¸ã§ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å…¨ä½“æ§‹é€ ã€å„ã‚¤ãƒ™ãƒ³ãƒˆã®æ„å‘³ã‚„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ã€ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãªã©ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚

---

# ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡ŒAPI ä»•æ§˜æ›¸

## 1. æ¦‚è¦

æœ¬APIã¯ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã—ã€å®Ÿè¡Œä¸­ã®é€²æ—ã‚„ä¸­é–“çµæœã€æœ€çµ‚çµæœã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸é€ä¿¡ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚  
ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯ã€Server-Sent Events (SSE) å½¢å¼ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã§è¿”ã•ã‚Œã€å„ãƒãƒ£ãƒ³ã‚¯ã¯ `data:` ã§å§‹ã¾ã‚Šã€2ã¤ã®æ”¹è¡Œæ–‡å­— `\n\n` ã§åŒºåˆ‡ã‚‰ã‚Œã¾ã™ã€‚

---

## 2. ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:  
  `POST /workflows/run`

- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼**:
  - `Authorization`: `Bearer {api_key}`
  - `Content-Type`: `application/json`

- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ (JSON)**:
  - `inputs`: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã«å¿…è¦ãªå…¥åŠ›å¤‰æ•°ã‚’ã‚­ãƒ¼/å€¤ãƒšã‚¢ã§æŒ‡å®š  
    - ä¾‹: `"currentLyric": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸæ­Œè©ã®ãƒ†ã‚­ã‚¹ãƒˆ"`
  - `response_mode`: `"streaming"` ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡ºåŠ›ã¨ãªã‚‹  
  - `user`: ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ï¼ˆä¾‹: `"user-<ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—>"`ï¼‰

### ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹

```json
{
  "inputs": {
    "currentLyric": "ã“ã“ã«æ­Œè©ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›"
  },
  "response_mode": "streaming",
  "user": "user-1740874417934"
}
```

---

## 3. ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®åŸºæœ¬å½¢å¼

- **Content-Type**: `text/event-stream`
- å„ãƒãƒ£ãƒ³ã‚¯ã¯ä»¥ä¸‹ã®å½¢å¼ã§é€ä¿¡ã•ã‚Œã¾ã™ï¼š
  ```
  data: { JSONæ–‡å­—åˆ— }\n\n
  ```
- SSEå½¢å¼ã®ãŸã‚ã€å—ä¿¡å´ã¯é€æ¬¡èª­ã¿å–ã‚Šã€å„ãƒãƒ£ãƒ³ã‚¯ã®JSONã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦å‡¦ç†ã—ã¾ã™ã€‚

---

## 4. å„ã‚¤ãƒ™ãƒ³ãƒˆç¨®åˆ¥ã¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

### 4.1 `workflow_started`
- **ç›®çš„**: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œé–‹å§‹ã‚’é€šçŸ¥
- **ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
  - `task_id`: ã‚¿ã‚¹ã‚¯è¿½è·¡ç”¨ã®ä¸€æ„ID
  - `workflow_run_id`: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œå…¨ä½“ã®ID
  - `event`: å›ºå®šå€¤ `"workflow_started"`
  - `data`:
    - `id`: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡ŒIDï¼ˆåŒä¸€ï¼‰
    - `workflow_id`: å¯¾è±¡ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ID
    - `sequence_number`: ã‚¤ãƒ™ãƒ³ãƒˆã®é€£ç•ªï¼ˆé€šå¸¸1ã‹ã‚‰é–‹å§‹ï¼‰
    - `inputs`: å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆä¾‹: `currentLyric` ãªã©ï¼‰
    - `created_at`: é–‹å§‹ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

### 4.2 `node_started`
- **ç›®çš„**: å€‹åˆ¥ã®å‡¦ç†ãƒãƒ¼ãƒ‰ã®å®Ÿè¡Œé–‹å§‹ã‚’é€šçŸ¥
- **ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
  - `task_id`ã€`workflow_run_id`
  - `event`: å›ºå®šå€¤ `"node_started"`
  - `data`:
    - `id`: ãƒãƒ¼ãƒ‰å®Ÿè¡Œã®ä¸€æ„ID
    - `node_id`: ãƒãƒ¼ãƒ‰ã®ID
    - `node_type`: ãƒãƒ¼ãƒ‰ã®ç¨®é¡ï¼ˆä¾‹: `"start"`, `"llm"` ãªã©ï¼‰
    - `title`: ãƒãƒ¼ãƒ‰ã®åç§°
    - `index`: å®Ÿè¡Œé †åºï¼ˆã‚·ãƒ¼ã‚±ãƒ³ã‚¹ç•ªå·ï¼‰
    - `predecessor_node_id`: ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰å‰ã®ãƒãƒ¼ãƒ‰ID
    - `inputs`: ãƒãƒ¼ãƒ‰ã«æ¸¡ã•ã‚ŒãŸå…¥åŠ›ï¼ˆå­˜åœ¨ã™ã‚‹å ´åˆï¼‰
    - `created_at`: ãƒãƒ¼ãƒ‰é–‹å§‹æ™‚åˆ»

### 4.3 `node_finished`
- **ç›®çš„**: ãƒãƒ¼ãƒ‰ã®å®Ÿè¡Œå®Œäº†ï¼ˆæˆåŠŸãƒ»å¤±æ•—ï¼‰ã‚’é€šçŸ¥
- **ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
  - `task_id`ã€`workflow_run_id`
  - `event`: å›ºå®šå€¤ `"node_finished"`
  - `data`:
    - `id`: ãƒãƒ¼ãƒ‰å®Ÿè¡Œã®ä¸€æ„ID
    - `node_id`: ãƒãƒ¼ãƒ‰ã®ID
    - `node_type`: ãƒãƒ¼ãƒ‰ã®ç¨®é¡
    - `title`: ãƒãƒ¼ãƒ‰åç§°
    - `index`: å®Ÿè¡Œé †åº
    - `predecessor_node_id`: ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰å‰ã®ãƒãƒ¼ãƒ‰ID
    - `inputs`: å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    - `process_data`: ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰å®Ÿè¡Œä¸­ã®è¿½åŠ ãƒ‡ãƒ¼ã‚¿ï¼ˆä¾‹: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæƒ…å ±ï¼‰
    - `outputs`: ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ãƒãƒ¼ãƒ‰ã®å‡ºåŠ›çµæœï¼ˆç”Ÿæˆãƒ†ã‚­ã‚¹ãƒˆãªã©ï¼‰
    - `status`: å®Ÿè¡ŒçŠ¶æ…‹ï¼ˆä¾‹: `"succeeded"`, `"failed"` ãªã©ï¼‰
    - `error`: ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã‚¨ãƒ©ãƒ¼æƒ…å ±
    - `elapsed_time`: ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰å‡¦ç†æ™‚é–“ï¼ˆç§’ï¼‰
    - `created_at`: é–‹å§‹æ™‚åˆ»
    - `finished_at`: çµ‚äº†æ™‚åˆ»

### 4.4 `text_chunk`
- **ç›®çš„**: ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã®æ–­ç‰‡ã‚’é€æ¬¡é€ä¿¡
- **ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
  - `task_id`ã€`workflow_run_id`
  - `event`: å›ºå®šå€¤ `"text_chunk"`
  - `data`:
    - `text`: é€ä¿¡ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆ
    - `from_variable_selector`: å‡ºåŠ›å…ƒã‚’ç¤ºã™è­˜åˆ¥æƒ…å ±ï¼ˆä¾‹: [ãƒãƒ¼ãƒ‰ID, "text"]ï¼‰

### 4.5 `tts_message` / `tts_message_end`
- **ç›®çš„**: TTSï¼ˆéŸ³å£°åˆæˆï¼‰é–¢é€£ã®å‡ºåŠ›é€šçŸ¥
- **tts_message**:
  - `task_id`ã€`message_id`
  - `audio`: base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸéŸ³å£°ãƒ‡ãƒ¼ã‚¿ï¼ˆMP3å½¢å¼ï¼‰
  - `created_at`: ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
- **tts_message_end**:
  - åŒæ§˜ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã€`audio` ã¯ç©ºæ–‡å­—ï¼ˆçµ‚äº†ã‚’ç¤ºã™ï¼‰

### 4.6 `ping`
- **ç›®çš„**: æ¥ç¶šã‚’ç¶­æŒã™ã‚‹ãŸã‚ã®å®šæœŸé€ä¿¡ä¿¡å·  
- **å†…å®¹**: è¿½åŠ ã®ãƒ‡ãƒ¼ã‚¿ã¯ãªãã€å˜ã«æ¥ç¶šçŠ¶æ…‹ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã«é€ä¿¡ã•ã‚Œã‚‹

---

## 5. ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰

- **400ç³»ã‚¨ãƒ©ãƒ¼**:
  - `invalid_param`: ç•°å¸¸ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å…¥åŠ›
  - `app_unavailable`: ã‚¢ãƒ—ãƒªè¨­å®šãŒåˆ©ç”¨ã§ããªã„
  - `provider_not_initialize`: ãƒ¢ãƒ‡ãƒ«è³‡æ ¼æƒ…å ±æœªè¨­å®š
  - `provider_quota_exceeded`: ã‚¯ã‚©ãƒ¼ã‚¿ä¸è¶³
  - `model_currently_not_support`: ç¾åœ¨ã®ãƒ¢ãƒ‡ãƒ«éå¯¾å¿œ
  - `workflow_request_error`: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œå¤±æ•—
- **500ç³»ã‚¨ãƒ©ãƒ¼**:
  - å†…éƒ¨ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

## 6. å…·ä½“çš„ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼ˆæ™‚ç³»åˆ—ï¼‰

ä»¥ä¸‹ã¯ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œé–‹å§‹ã‹ã‚‰çµ‚äº†ã¾ã§ã®ä¸€é€£ã®ã‚¤ãƒ™ãƒ³ãƒˆä¾‹ã§ã™ã€‚

### 6.1 Workflow Started

```json
data: {
  "event": "workflow_started",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "id": "11a4xxx",
    "workflow_id": "b8060xxxxx",
    "sequence_number": 49,
    "inputs": {
      "currentLyric": "ã­ã‡\nã©ã†aaaaaaaaaaaaafãã‚\n\n"
    },
    "created_at": 1740874418
  }
}
```

### 6.2 Start Node - Node Started

```json
data: {
  "event": "node_started",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "id": "25cxxxx",
    "node_id": "1739686615603",
    "node_type": "start",
    "title": "Startã®æ­Œè©",
    "index": 1,
    "created_at": 1740874418
  }
}
```

### 6.3 Start Node - Node Finished

```json
data: {
  "event": "node_finished",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "id": "25cxxxx",
    "node_id": "1739686615603",
    "node_type": "start",
    "title": "Startã®æ­Œè©",
    "index": 1,
    "inputs": {
      "currentLyric": "ã­ã‡\nã©ã†aaaaaaaaaaaaafãã‚\n\n"
    },
    "status": "succeeded",
    "elapsed_time": 0.037095,
    "created_at": 1740874418,
    "finished_at": 1740874418
  }
}
```

### 6.4 LLM Node (ã‚¢ãƒ‰ãƒã‚¤ã‚¹) - Node Started

```json
data: {
  "event": "node_started",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "id": "e601e317-0bda-42e0-a524-9a3b98f42f09",
    "node_id": "1740815000104",
    "node_type": "llm",
    "title": "ã‚¢ãƒ‰ãƒã‚¤ã‚¹",
    "index": 2,
    "predecessor_node_id": "1739686615603",
    "created_at": 1740874418
  }
}
```

### 6.5 LLM Node (ã‚¢ãƒ‰ãƒã‚¤ã‚¹) - Text Chunks

```json
data: {
  "event": "text_chunk",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "text": "###",
    "from_variable_selector": ["1740815000104", "text"]
  }
}
```

```json
data: {
  "event": "text_chunk",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "text": " ä½œè©©",
    "from_variable_selector": ["1740815000104", "text"]
  }
}
```

```json
data: {
  "event": "text_chunk",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "text": "ã®",
    "from_variable_selector": ["1740815000104", "text"]
  }
}
```

```json
data: {
  "event": "text_chunk",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "text": "ã‚¢ãƒ‰ãƒã‚¤ã‚¹",
    "from_variable_selector": ["1740815000104", "text"]
  }
}
```

### 6.6 LLM Node (ã‚¢ãƒ‰ãƒã‚¤ã‚¹) - Node Finished

```json
data: {
  "event": "node_finished",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "id": "e601e317-0bda-42e0-a524-9a3b98f42f09",
    "node_id": "1740815000104",
    "node_type": "llm",
    "title": "ã‚¢ãƒ‰ãƒã‚¤ã‚¹",
    "index": 2,
    "predecessor_node_id": "1739686615603",
    "inputs": { "#context#": "ã­ã‡\nã©ã†aaaaaaaaaaaaafãã‚\n\n" },
    "outputs": {
      "text": "### ä½œè©©ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ âœ¨\n\n1. **æ„Ÿæƒ…ã‚’å¤§åˆ‡ã«** â¤ï¸\n..."
    },
    "status": "succeeded",
    "elapsed_time": 1.518152,
    "created_at": 1740874418,
    "finished_at": 1740874420
  }
}
```

### 6.7 æ¬¡ã® LLM ãƒãƒ¼ãƒ‰ (ãƒ•ãƒ¬ãƒ¼ã‚º) - Node Started and Text Chunks

```json
data: {
  "event": "node_started",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "id": "6c5eaf9d-9fec-4b6f-b2a0-ab032d43c2e4",
    "node_id": "17408306918800",
    "node_type": "llm",
    "title": "ãƒ•ãƒ¬ãƒ¼ã‚º",
    "index": 3,
    "predecessor_node_id": "1740815000104",
    "created_at": 1740874420
  }
}
```

**ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚¯ä¾‹**:
```json
data: {
  "event": "text_chunk",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "text": "\n1",
    "from_variable_selector": ["17408306918800", "text"]
  }
}
```
ï¼ˆä»¥ä¸‹ã€ç”Ÿæˆã•ã‚ŒãŸãƒ•ãƒ¬ãƒ¼ã‚ºãŒè¤‡æ•°ã® `text_chunk` ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦é€ä¿¡ã•ã‚Œã¾ã™ï¼‰

### 6.8 ãƒ•ãƒ¬ãƒ¼ã‚ºãƒãƒ¼ãƒ‰ - Node Finished

```json
data: {
  "event": "node_finished",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "id": "f662b864-11ea-4896-9d5e-29bf8b84b1f6",
    "node_id": "17408306918800",
    "node_type": "llm",
    "title": "ãƒ•ãƒ¬ãƒ¼ã‚º",
    "index": 3,
    "predecessor_node_id": "1740815000104",
    "inputs": { "#context#": "### ä½œè©©ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ âœ¨\n..." },
    "outputs": {
      "advice": "### ä½œè©©ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ âœ¨\n\n1. **æ„Ÿæƒ…ã‚’å¤§åˆ‡ã«** â¤ï¸\n2. **ã‚·ãƒ³ãƒ—ãƒ«ã«è¡¨ç¾** ğŸ“\n...",
      "phrases": "1. å¤œç©ºã«æ¼‚ã†æ˜Ÿã®ç¿¼\n2. é¢¨ãŒé‹ã¶æ‡ã‹ã—ã„å£°\n...",
      "words": "é¢¨ã®ã•ã•ã‚„ãã€æœˆã®å…‰ã€å­¤ç‹¬ãªæ—…ã€..."
    },
    "status": "succeeded",
    "elapsed_time": 0.016134,
    "created_at": 1740874423,
    "finished_at": 1740874423
  }
}
```

### 6.9 End Node - Node Started and Finished

```json
data: {
  "event": "node_started",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "id": "d2c74da5-7c2f-480b-b1e3-bc2460cfa22a",
    "node_id": "1740217455075",
    "node_type": "end",
    "title": "çµ‚äº†",
    "index": 5,
    "predecessor_node_id": "17408320537560",
    "created_at": 1740874423
  }
}
```

```json
data: {
  "event": "node_finished",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "id": "d2c74da5-7c2f-480b-b1e3-bc2460cfa22a",
    "node_id": "1740217455075",
    "node_type": "end",
    "title": "çµ‚äº†",
    "index": 5,
    "predecessor_node_id": "17408320537560",
    "inputs": {
      "advice": "### ä½œè©©ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ âœ¨\n\n1. **æ„Ÿæƒ…ã‚’å¤§åˆ‡ã«** â¤ï¸\n..."
    },
    "outputs": {
      "advice": "### ä½œè©©ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ âœ¨\n\n1. **æ„Ÿæƒ…ã‚’å¤§åˆ‡ã«** â¤ï¸\n2. **ã‚·ãƒ³ãƒ—ãƒ«ã«è¡¨ç¾** ğŸ“\n3. **ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’æŒãŸã›ã‚‹** ğŸ“–\n4. **ãƒªã‚ºãƒ ã‚’æ„è­˜** ğŸ¶\n5. **å¿ƒã«éŸ¿ãè¨€è‘‰é¸ã³** ğŸ’¬\n\nè‡ªåˆ†ã®è¨€è‘‰ã§æ›¸ã„ã¦ã¿ã¦ï¼ ğŸŒŸ",
      "phrases": "1. å¤œç©ºã«æ¼‚ã†æ˜Ÿã®ç¿¼\n2. é¢¨ãŒé‹ã¶æ‡ã‹ã—ã„å£°\n3. å¤¢ã®ä¸­ã§å›ã¨å†ä¼šã™ã‚‹\n...",
      "words": "é¢¨ã®ã•ã•ã‚„ãã€æœˆã®å…‰ã€å­¤ç‹¬ãªæ—…ã€å¿ƒã®è‚–ã€å¤¢ã®ã‹ã‘ã‚‰ã€..."
    },
    "status": "succeeded",
    "elapsed_time": 4.808306537102908,
    "created_at": 1740874418,
    "finished_at": 1740874423
  }
}
```

### 6.10 Workflow Finished

```json
data: {
  "event": "workflow_finished",
  "workflow_run_id": "11a4xxx",
  "task_id": "c996xxx",
  "data": {
    "id": "11a4xxx",
    "workflow_id": "b8060xxxxx",
    "sequence_number": 49,
    "status": "succeeded",
    "outputs": {
      "advice": "### ä½œè©©ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ âœ¨\n\n1. **æ„Ÿæƒ…ã‚’å¤§åˆ‡ã«** â¤ï¸\n2. **ã‚·ãƒ³ãƒ—ãƒ«ã«è¡¨ç¾** ğŸ“\n3. **ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’æŒãŸã›ã‚‹** ğŸ“–\n4. **ãƒªã‚ºãƒ ã‚’æ„è­˜** ğŸ¶\n5. **å¿ƒã«éŸ¿ãè¨€è‘‰é¸ã³** ğŸ’¬\n\nè‡ªåˆ†ã®è¨€è‘‰ã§æ›¸ã„ã¦ã¿ã¦ï¼ ğŸŒŸ",
      "phrases": "1. å¤œç©ºã«æ¼‚ã†æ˜Ÿã®ç¿¼\n2. é¢¨ãŒé‹ã¶æ‡ã‹ã—ã„å£°\n3. å¤¢ã®ä¸­ã§å›ã¨å†ä¼šã™ã‚‹\n...",
      "words": "é¢¨ã®ã•ã•ã‚„ãã€æœˆã®å…‰ã€å­¤ç‹¬ãªæ—…ã€å¿ƒã®è‚–ã€å¤¢ã®ã‹ã‘ã‚‰ã€..."
    },
    "error": null,
    "elapsed_time": 4.808306537102908,
    "total_tokens": 759,
    "total_steps": 5,
    "created_at": 1740874418,
    "finished_at": 1740874423
  }
}
```

---

## ã€ã¾ã¨ã‚ã€‘

- **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é–‹å§‹**: `workflow_started` ã‚¤ãƒ™ãƒ³ãƒˆã§å®Ÿè¡Œé–‹å§‹ãŒé€šçŸ¥ã•ã‚Œã€å…¥åŠ›æƒ…å ±ãŒé€ä¿¡ã•ã‚Œã‚‹  
- **Start ãƒãƒ¼ãƒ‰**: `node_started` ã¨ `node_finished` ã«ã‚ˆã‚Šã€æœ€åˆã®ãƒãƒ¼ãƒ‰ã®å‡¦ç†é–‹å§‹ã¨å®Œäº†ãŒç¢ºèªã•ã‚Œã‚‹  
- **LLM ãƒãƒ¼ãƒ‰ (ã‚¢ãƒ‰ãƒã‚¤ã‚¹)**: `node_started` â†’ è¤‡æ•°ã® `text_chunk` ã‚¤ãƒ™ãƒ³ãƒˆã§æ–­ç‰‡çš„ãªãƒ†ã‚­ã‚¹ãƒˆãŒé€ä¿¡ã•ã‚Œã€`node_finished` ã§å®Œäº†çµæœãŒè¿”ã•ã‚Œã‚‹  
- **LLM ãƒãƒ¼ãƒ‰ (ãƒ•ãƒ¬ãƒ¼ã‚º)**: åŒæ§˜ã«ã€é–‹å§‹ (`node_started`)ã€ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚¯ã€çµ‚äº† (`node_finished`)  
- **çµ‚äº†å‡¦ç†**: End ãƒãƒ¼ãƒ‰ã® `node_started` ã¨ `node_finished` ã‚’çµŒã¦ã€æœ€çµ‚çš„ã« `workflow_finished` ã§å…¨ä½“ã®å®Œäº†ãŒé€šçŸ¥ã•ã‚Œã‚‹

ã“ã®ä»•æ§˜æ›¸ãŠã‚ˆã³å…·ä½“ä¾‹ã‚’å…ƒã«ã€é–‹ç™ºè€…ã¯ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã€UIæ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯ã€ãŠã‚ˆã³ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å®Ÿè£…ãƒ»ãƒ‡ãƒãƒƒã‚°ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚